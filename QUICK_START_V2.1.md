# 快速开始 - v2.1.0 新功能

欢迎使用 AI 群聊助手 v2.1.0！本文档帮助你快速上手新功能。

## 🎉 新功能一览

### 1. @提及功能

直接召唤 AI 机器人，无需等待关键词触发。

**基础用法：**

```
@技术助手 这段代码有什么问题？
@客服小助手 如何重置密码？
@all 大家怎么看这个方案？
```

**自动补全：**
- 输入 `@` 自动显示机器人列表
- 继续输入可筛选机器人
- 点击选择即可插入

### 2. 引用回复功能

引用历史消息，让 AI 更好理解上下文。

**使用步骤：**
1. 鼠标悬停在任何消息上
2. 点击右侧出现的引用按钮 ↩️
3. 输入你的回复
4. 发送消息

### 3. 智能上下文管理

AI 只看最近 5 条消息，提高响应速度，节省 token。

**优势：**
- ⚡ 响应更快
- 💰 成本更低（节省约 50% token）
- 🎯 更聚焦当前话题
- 📌 通过引用可添加重要历史消息

## 🚀 5分钟快速体验

### 步骤 1：部署新版本

**本地开发：**
```bash
# 拉取代码
git pull

# 安装依赖
pnpm install

# 运行迁移
pnpm db:migrate

# 启动服务
pnpm dev
```

**Vercel 部署：**
1. 推送代码到 Git 仓库
2. Vercel 自动部署
3. 在 Vercel 控制台运行迁移（如需要）

### 步骤 2：测试 @提及

1. 打开聊天页面
2. 输入 `@`，看到机器人列表
3. 选择一个机器人，例如 `@技术助手`
4. 输入问题：`@技术助手 Hello!`
5. 发送，观察机器人回复

### 步骤 3：测试 @all

1. 输入：`@all 大家好！`
2. 发送消息
3. 观察所有活跃的机器人都会回复

### 步骤 4：测试引用功能

1. 找到任何一条历史消息
2. 鼠标悬停，点击引用按钮
3. 输入：`能详细说说吗？`
4. 发送，AI 会基于被引用的消息回复

### 步骤 5：验证上下文限制

1. 连续发送 10 条消息
2. 引用第 1 条消息
3. 问：`你还记得我说了什么吗？`
4. AI 会回复它看不到那么早的消息（除非你引用了）

## 💡 实用技巧

### 技巧 1：混合使用触发方式

```
# 场景：多轮技术讨论
用户：@技术助手 如何优化数据库查询？
技术助手：可以使用索引...

用户：索引的具体方案是什么？
技术助手：（通过关键词"索引"自动触发）...

用户：[引用第一条回复] 能给个具体例子吗？
技术助手：（理解完整上下文）...
```

### 技巧 2：多机器人协作

```
用户：@all 这个功能应该怎么设计？

产品经理机器人：从产品角度...
技术助手机器人：从技术角度...
运营助手机器人：从运营角度...

用户：[引用产品经理的回复] @技术助手 技术上能实现吗？
```

### 技巧 3：长对话追溯

```
[50条消息前]
用户：我们决定使用 Redis 做缓存

[现在]
用户：[引用50条消息前的那条] @技术助手 当时说的 Redis 方案具体是什么？
# AI 能看到被引用的消息，即使不在最近5条内
```

### 技巧 4：精确提问

```
# 不好的方式
用户：代码有问题（不明确，可能触发多个机器人）

# 好的方式
用户：@技术助手 这段Python代码报错了（明确指定机器人）
```

## 📊 功能对比

| 功能 | v2.0.0 | v2.1.0 |
|------|--------|--------|
| 触发方式 | 仅关键词 | 关键词 + @提及 + @all |
| 引用消息 | ❌ | ✅ |
| 上下文长度 | 10条 | 5条（更高效） |
| 自动补全 | ❌ | ✅ |
| 召唤所有机器人 | ❌ | ✅ @all |

## 🎯 使用场景

### 场景 1：技术支持

```
用户：@技术助手 网站打不开了
技术助手：请提供更多信息...

用户：[截图或详细描述]
技术助手：[基于上下文分析]...
```

### 场景 2：头脑风暴

```
用户：@all 新产品定价策略大家有什么想法？

产品：从市场定位考虑...
技术：从成本角度...
运营：从推广角度...
```

### 场景 3：学习讨论

```
用户：什么是微服务？
技术助手：[关键词触发，解释微服务]

用户：[引用回复] 能举个具体例子吗？
技术助手：[基于前文，给出例子]

用户：[引用例子] @all 大家觉得这个例子还有优化空间吗？
多个机器人：[从不同角度点评]
```

### 场景 4：项目协作

```
用户：@产品经理 这个需求的优先级如何？
产品经理：P0，需要本周完成

用户：[引用产品的回复] @技术助手 技术上能实现吗？
技术助手：可以，预计需要2天

用户：[同时引用两条回复] @all 那我们开始吧
```

## ⚙️ 配置建议

### 机器人命名

为了方便 @提及，建议使用简短明确的名称：

✅ 好的命名：
- `技术助手`
- `客服`
- `产品`

❌ 避免的命名：
- `这是一个很长的机器人名称`（太长）
- `bot1`（不明确）
- `助手-技术-v2`（复杂）

### 触发关键词设置

即使有了 @提及，关键词仍然有用：

```
技术助手的关键词：
- 代码
- bug
- 报错
- 优化

这样既支持 @技术助手，也支持关键词自动触发
```

### 机器人数量

建议：
- 小型项目：2-3 个机器人
- 中型项目：4-6 个机器人
- 大型项目：6-10 个机器人

太多机器人可能导致：
- @all 时回复太多
- 自动补全列表太长
- 管理复杂

## 🔧 故障排查

### @提及不工作？

检查：
1. 机器人名称是否正确（区分大小写）
2. 机器人是否已启用
3. 机器人是否配置了有效的 API Key

### 引用按钮没出现？

原因：
1. 需要鼠标悬停在消息上
2. 移动端可能需要长按（根据设备）
3. 自己的消息也可以引用

### AI 看不到历史消息？

说明：
- AI 只能看到最近 5 条消息
- 使用引用功能可以让 AI 看到更早的消息
- 这是设计行为，用于控制成本和提高速度

## 📚 进一步学习

- 详细功能文档：[MENTION_QUOTE_GUIDE.md](./MENTION_QUOTE_GUIDE.md)
- 升级指南：[UPGRADE_V2.1.md](./UPGRADE_V2.1.md)
- 完整文档：[README.md](./README.md)

## 💬 反馈与支持

遇到问题或有建议？

- GitHub Issues: [提交问题](https://github.com/your-repo/issues)
- 讨论区: [参与讨论](https://github.com/your-repo/discussions)

---

**开始使用吧！** 🚀

试试发送 `@all 大家好！` 来开始你的第一次群聊体验！
